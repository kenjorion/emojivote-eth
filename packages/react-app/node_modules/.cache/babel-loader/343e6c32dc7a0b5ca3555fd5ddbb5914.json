{"ast":null,"code":"import _regeneratorRuntime from\"/Users/ken/Documents/scaffold-eth/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/ken/Documents/scaffold-eth/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/ken/Documents/scaffold-eth/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Blockie}from\".\";import{Input}from'antd';export default function AddressInput(props){var _useState=useState(0),_useState2=_slicedToArray(_useState,2),ens=_useState2[0],setEns=_useState2[1];useEffect(function(){setEns(\"\");if(props.value&&props.ensProvider){var getEns=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var newEns,possibleAddress;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;console.log(\"trying reverse ens\",newEns);_context.next=4;return props.ensProvider.lookupAddress(props.value);case 4:newEns=_context.sent;console.log(\"setting ens\",newEns);setEns(newEns);_context.next=11;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);case 11:console.log(\"checking resolve\");if(!(props.value.indexOf(\".eth\")>0||props.value.indexOf(\".xyz\")>0)){_context.next=24;break;}_context.prev=13;console.log(\"resolving\");_context.next=17;return props.ensProvider.resolveName(props.value);case 17:possibleAddress=_context.sent;console.log(\"GOT:L\",possibleAddress);if(possibleAddress){setEns(props.value);props.onChange(possibleAddress);}_context.next=24;break;case 22:_context.prev=22;_context.t1=_context[\"catch\"](13);case 24:case\"end\":return _context.stop();}}},_callee,null,[[0,9],[13,22]]);}));return function getEns(){return _ref.apply(this,arguments);};}();getEns();}},[props.value,props.ensProvider]);return/*#__PURE__*/React.createElement(Input,{placeholder:\"address\",prefix:/*#__PURE__*/React.createElement(Blockie,{address:props.value,size:8,scale:3}),value:ens?ens:props.value,onChange:/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var address,possibleAddress;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:address=e.target.value;if(!(address.indexOf(\".eth\")>0||address.indexOf(\".xyz\")>0)){_context2.next=11;break;}_context2.prev=2;_context2.next=5;return props.ensProvider.resolveName(address);case 5:possibleAddress=_context2.sent;if(possibleAddress){address=possibleAddress;}_context2.next=11;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](2);case 11:props.onChange(address);case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[2,9]]);}));return function(_x){return _ref2.apply(this,arguments);};}()});}","map":{"version":3,"sources":["/Users/ken/Documents/scaffold-eth/packages/react-app/src/components/AddressInput.js"],"names":["React","useState","useEffect","Blockie","Input","AddressInput","props","ens","setEns","value","ensProvider","getEns","console","log","newEns","lookupAddress","indexOf","resolveName","possibleAddress","onChange","e","address","target"],"mappings":"qcAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,OAAT,KAAyB,GAAzB,CACA,OAASC,KAAT,KAAsB,MAAtB,CAEA,cAAe,SAASC,CAAAA,YAAT,CAAsBC,KAAtB,CAA6B,eAElBL,QAAQ,CAAC,CAAD,CAFU,wCAElCM,GAFkC,eAE7BC,MAF6B,eAI1CN,SAAS,CAAC,UAAI,CACZM,MAAM,CAAC,EAAD,CAAN,CACA,GAAGF,KAAK,CAACG,KAAN,EAAeH,KAAK,CAACI,WAAxB,CAAoC,IACnBC,CAAAA,MADmB,0FAClC,8KAGIC,OAAO,CAACC,GAAR,CAAY,oBAAZ,CAAiCC,MAAjC,EAHJ,sBAKmBR,CAAAA,KAAK,CAACI,WAAN,CAAkBK,aAAlB,CAAgCT,KAAK,CAACG,KAAtC,CALnB,QAKIK,MALJ,eAMIF,OAAO,CAACC,GAAR,CAAY,aAAZ,CAA0BC,MAA1B,EACAN,MAAM,CAACM,MAAD,CAAN,CAPJ,uFASEF,OAAO,CAACC,GAAR,CAAY,kBAAZ,EATF,KAUMP,KAAK,CAACG,KAAN,CAAYO,OAAZ,CAAoB,MAApB,EAA4B,CAA5B,EAAiCV,KAAK,CAACG,KAAN,CAAYO,OAAZ,CAAoB,MAApB,EAA4B,CAVnE,4CAYMJ,OAAO,CAACC,GAAR,CAAY,WAAZ,EAZN,uBAakCP,CAAAA,KAAK,CAACI,WAAN,CAAkBO,WAAlB,CAA8BX,KAAK,CAACG,KAApC,CAblC,SAaUS,eAbV,eAcMN,OAAO,CAACC,GAAR,CAAY,OAAZ,CAAoBK,eAApB,EACA,GAAGA,eAAH,CAAmB,CACjBV,MAAM,CAACF,KAAK,CAACG,KAAP,CAAN,CACAH,KAAK,CAACa,QAAN,CAAeD,eAAf,EACD,CAlBP,8JADkC,kBACnBP,CAAAA,MADmB,2CAuBlCA,MAAM,GACP,CACF,CA3BQ,CA2BP,CAACL,KAAK,CAACG,KAAP,CAAcH,KAAK,CAACI,WAApB,CA3BO,CAAT,CA8BA,mBACE,oBAAC,KAAD,EACE,WAAW,CAAC,SADd,CAEE,MAAM,cAAE,oBAAC,OAAD,EAAS,OAAO,CAAEJ,KAAK,CAACG,KAAxB,CAA+B,IAAI,CAAE,CAArC,CAAwC,KAAK,CAAE,CAA/C,EAFV,CAGE,KAAK,CAAEF,GAAG,CAACA,GAAD,CAAKD,KAAK,CAACG,KAHvB,CAIE,QAAQ,2FAAE,kBAAOW,CAAP,kJACJC,OADI,CACMD,CAAC,CAACE,MAAF,CAASb,KADf,MAEJY,OAAO,CAACL,OAAR,CAAgB,MAAhB,EAAwB,CAAxB,EAA6BK,OAAO,CAACL,OAAR,CAAgB,MAAhB,EAAwB,CAFjD,oEAIwBV,CAAAA,KAAK,CAACI,WAAN,CAAkBO,WAAlB,CAA8BI,OAA9B,CAJxB,QAIAH,eAJA,gBAKJ,GAAGA,eAAH,CAAmB,CACjBG,OAAO,CAAGH,eAAV,CACD,CAPG,2FAURZ,KAAK,CAACa,QAAN,CAAeE,OAAf,EAVQ,sEAAF,+DAJV,EADF,CAmBD","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { Blockie }  from \".\"\nimport { Input } from 'antd';\n\nexport default function AddressInput(props) {\n\n  const [ ens, setEns ] = useState(0)\n\n  useEffect(()=>{\n    setEns(\"\")\n    if(props.value && props.ensProvider){\n      async function getEns(){\n        let newEns\n        try{\n          console.log(\"trying reverse ens\",newEns)\n\n          newEns = await props.ensProvider.lookupAddress(props.value)\n          console.log(\"setting ens\",newEns)\n          setEns(newEns)\n        }catch(e){}\n        console.log(\"checking resolve\")\n        if( props.value.indexOf(\".eth\")>0 || props.value.indexOf(\".xyz\")>0 ){\n          try{\n            console.log(\"resolving\")\n            let possibleAddress = await props.ensProvider.resolveName(props.value);\n            console.log(\"GOT:L\",possibleAddress)\n            if(possibleAddress){\n              setEns(props.value)\n              props.onChange(possibleAddress)\n            }\n          }catch(e){}\n        }\n      }\n      getEns()\n    }\n  },[props.value, props.ensProvider])\n\n\n  return (\n    <Input\n      placeholder=\"address\"\n      prefix={<Blockie address={props.value} size={8} scale={3}/>}\n      value={ens?ens:props.value}\n      onChange={async (e)=>{\n        let address = e.target.value\n        if( address.indexOf(\".eth\")>0 || address.indexOf(\".xyz\")>0 ){\n          try{\n            let possibleAddress = await props.ensProvider.resolveName(address);\n            if(possibleAddress){\n              address = possibleAddress\n            }\n          }catch(e){}\n        }\n        props.onChange(address)\n      }}\n    />\n  );\n}\n"]},"metadata":{},"sourceType":"module"}