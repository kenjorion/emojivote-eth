{"ast":null,"code":"import _regeneratorRuntime from\"/Users/ken/Documents/scaffold-eth/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/ken/Documents/scaffold-eth/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/ken/Documents/scaffold-eth/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{usePoller,useBlockNumber}from\"../hooks\";import{Button,Badge}from'antd';//import { WalletOutlined } from '@ant-design/icons';\nimport Address from\"./Address.js\";export default function Provider(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showMore=_useState2[0],setShowMore=_useState2[1];var _useState3=useState(\"processing\"),_useState4=_slicedToArray(_useState3,2),status=_useState4[0],setStatus=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),network=_useState6[0],setNetwork=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),signer=_useState8[0],setSigner=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),address=_useState10[0],setAddress=_useState10[1];var blockNumber=useBlockNumber(props.provider);usePoller(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var newNetwork,newSigner,newAddress;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(props.provider&&typeof props.provider.getNetwork==\"function\")){_context.next=26;break;}_context.prev=1;_context.next=4;return props.provider.getNetwork();case 4:newNetwork=_context.sent;setNetwork(newNetwork);if(newNetwork.chainId>0){setStatus(\"success\");}else{setStatus(\"warning\");}_context.next=13;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);console.log(_context.t0);setStatus(\"processing\");case 13:_context.prev=13;_context.next=16;return props.provider.getSigner();case 16:newSigner=_context.sent;setSigner(newSigner);_context.next=20;return newSigner.getAddress();case 20:newAddress=_context.sent;setAddress(newAddress);_context.next=26;break;case 24:_context.prev=24;_context.t1=_context[\"catch\"](13);case 26:case\"end\":return _context.stop();}}},_callee,null,[[1,9],[13,24]]);})),1377);if(typeof props.provider==\"undefined\"||typeof props.provider.getNetwork!=\"function\"||!network||!network.chainId){return/*#__PURE__*/React.createElement(Button,{shape:\"round\",size:\"large\",onClick:function onClick(){setShowMore(!showMore);}},/*#__PURE__*/React.createElement(Badge,{status:status}),\" \",props.name);}var showExtra=\"\";if(showMore){showExtra=/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(\"span\",{style:{padding:3}},\"id:\",network?network.chainId:\"\"),/*#__PURE__*/React.createElement(\"span\",{style:{padding:3}},\"name:\",network?network.name:\"\"));}var showWallet=\"\";if(typeof signer!=\"undefined\"&&address){showWallet=/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(\"span\",{style:{padding:3}},/*#__PURE__*/React.createElement(Address,{minimized:true,value:address})));}return/*#__PURE__*/React.createElement(Button,{shape:\"round\",size:\"large\",onClick:function onClick(){setShowMore(!showMore);}},/*#__PURE__*/React.createElement(Badge,{status:status}),\" \",props.name,\" \",showWallet,\" #\",blockNumber,\" \",showExtra);}","map":{"version":3,"sources":["/Users/ken/Documents/scaffold-eth/packages/react-app/src/components/Provider.js"],"names":["React","useState","usePoller","useBlockNumber","Button","Badge","Address","Provider","props","showMore","setShowMore","status","setStatus","network","setNetwork","signer","setSigner","address","setAddress","blockNumber","provider","getNetwork","newNetwork","chainId","console","log","getSigner","newSigner","getAddress","newAddress","name","showExtra","padding","showWallet"],"mappings":"qcAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,SAAT,CAAoBC,cAApB,KAA0C,UAA1C,CACA,OAASC,MAAT,CAAiBC,KAAjB,KAA8B,MAA9B,CACA;AAEA,MAAOC,CAAAA,OAAP,KAAoB,cAApB,CAEA,cAAe,SAASC,CAAAA,QAAT,CAAkBC,KAAlB,CAAyB,eAENP,QAAQ,CAAC,KAAD,CAFF,wCAE/BQ,QAF+B,eAErBC,WAFqB,8BAGVT,QAAQ,CAAC,YAAD,CAHE,yCAG/BU,MAH+B,eAGvBC,SAHuB,8BAIRX,QAAQ,EAJA,yCAI/BY,OAJ+B,eAItBC,UAJsB,8BAKVb,QAAQ,EALE,yCAK/Bc,MAL+B,eAKvBC,SALuB,8BAMPf,QAAQ,EAND,0CAM/BgB,OAN+B,gBAMtBC,UANsB,gBAQtC,GAAMC,CAAAA,WAAW,CAAGhB,cAAc,CAACK,KAAK,CAACY,QAAP,CAAlC,CAEAlB,SAAS,sEAAC,4KACLM,KAAK,CAACY,QAAN,EAAiB,MAAOZ,CAAAA,KAAK,CAACY,QAAN,CAAeC,UAAtB,EAAoC,UADhD,iEAGqBb,CAAAA,KAAK,CAACY,QAAN,CAAeC,UAAf,EAHrB,QAGEC,UAHF,eAIJR,UAAU,CAACQ,UAAD,CAAV,CACA,GAAGA,UAAU,CAACC,OAAX,CAAmB,CAAtB,CAAwB,CACtBX,SAAS,CAAC,SAAD,CAAT,CACD,CAFD,IAEK,CACHA,SAAS,CAAC,SAAD,CAAT,CACD,CATG,+EAWJY,OAAO,CAACC,GAAR,cACAb,SAAS,CAAC,YAAD,CAAT,CAZI,gDAeoBJ,CAAAA,KAAK,CAACY,QAAN,CAAeM,SAAf,EAfpB,SAeEC,SAfF,eAgBJX,SAAS,CAACW,SAAD,CAAT,CAhBI,uBAiBqBA,CAAAA,SAAS,CAACC,UAAV,EAjBrB,SAiBEC,UAjBF,eAkBJX,UAAU,CAACW,UAAD,CAAV,CAlBI,8JAAD,GAqBP,IArBO,CAAT,CAuBA,GAAG,MAAOrB,CAAAA,KAAK,CAACY,QAAb,EAAyB,WAAzB,EAAwC,MAAOZ,CAAAA,KAAK,CAACY,QAAN,CAAeC,UAAtB,EAAoC,UAA5E,EAA0F,CAACR,OAA3F,EAAsG,CAACA,OAAO,CAACU,OAAlH,CAA0H,CACxH,mBACE,oBAAC,MAAD,EAAQ,KAAK,CAAC,OAAd,CAAsB,IAAI,CAAC,OAA3B,CAAmC,OAAO,CAAE,kBAAI,CAACb,WAAW,CAAC,CAACD,QAAF,CAAX,CAAuB,CAAxE,eACE,oBAAC,KAAD,EAAO,MAAM,CAAEE,MAAf,EADF,KAC6BH,KAAK,CAACsB,IADnC,CADF,CAKD,CAED,GAAIC,CAAAA,SAAS,CAAG,EAAhB,CACA,GAAGtB,QAAH,CAAY,CACVsB,SAAS,cACP,6CACE,4BAAM,KAAK,CAAE,CAACC,OAAO,CAAC,CAAT,CAAb,QACMnB,OAAO,CAACA,OAAO,CAACU,OAAT,CAAiB,EAD9B,CADF,cAIE,4BAAM,KAAK,CAAE,CAACS,OAAO,CAAC,CAAT,CAAb,UACQnB,OAAO,CAACA,OAAO,CAACiB,IAAT,CAAc,EAD7B,CAJF,CADF,CAUD,CAED,GAAIG,CAAAA,UAAU,CAAG,EAAjB,CACA,GAAG,MAAOlB,CAAAA,MAAP,EAAiB,WAAjB,EAAgCE,OAAnC,CAA2C,CACzCgB,UAAU,cACR,6CACE,4BAAM,KAAK,CAAE,CAACD,OAAO,CAAC,CAAT,CAAb,eACE,oBAAC,OAAD,EAAS,SAAS,CAAE,IAApB,CAA0B,KAAK,CAAEf,OAAjC,EADF,CADF,CADF,CAOD,CAED,mBACE,oBAAC,MAAD,EAAQ,KAAK,CAAC,OAAd,CAAsB,IAAI,CAAC,OAA3B,CAAmC,OAAO,CAAE,kBAAI,CAACP,WAAW,CAAC,CAACD,QAAF,CAAX,CAAuB,CAAxE,eACE,oBAAC,KAAD,EAAO,MAAM,CAAEE,MAAf,EADF,KAC6BH,KAAK,CAACsB,IADnC,KAC0CG,UAD1C,MACwDd,WADxD,KACsEY,SADtE,CADF,CAKD","sourcesContent":["import React, { useState } from 'react'\nimport { usePoller, useBlockNumber } from \"../hooks\";\nimport { Button, Badge } from 'antd';\n//import { WalletOutlined } from '@ant-design/icons';\n\nimport Address from \"./Address.js\"\n\nexport default function Provider(props) {\n\n  const [showMore, setShowMore] = useState(false)\n  const [status, setStatus] = useState(\"processing\")\n  const [network, setNetwork] = useState()\n  const [signer, setSigner] = useState()\n  const [address, setAddress ] = useState()\n\n  const blockNumber = useBlockNumber(props.provider)\n\n  usePoller(async ()=>{\n    if(props.provider&& typeof props.provider.getNetwork == \"function\"){\n      try{\n        const newNetwork = await props.provider.getNetwork()\n        setNetwork(newNetwork)\n        if(newNetwork.chainId>0){\n          setStatus(\"success\")\n        }else{\n          setStatus(\"warning\")\n        }\n      }catch(e){\n        console.log(e)\n        setStatus(\"processing\")\n      }\n      try{\n        const newSigner = await props.provider.getSigner()\n        setSigner(newSigner)\n        const newAddress = await newSigner.getAddress()\n        setAddress(newAddress)\n      }catch(e){}\n    }\n  },1377)\n\n  if(typeof props.provider == \"undefined\" || typeof props.provider.getNetwork != \"function\" || !network || !network.chainId){\n    return (\n      <Button shape=\"round\" size=\"large\" onClick={()=>{setShowMore(!showMore)}}>\n        <Badge status={status} /> {props.name}\n      </Button>\n    );\n  }\n\n  let showExtra = \"\"\n  if(showMore){\n    showExtra = (\n      <span>\n        <span style={{padding:3}}>\n          id:{network?network.chainId:\"\"}\n        </span>\n        <span style={{padding:3}}>\n          name:{network?network.name:\"\"}\n        </span>\n      </span>\n    )\n  }\n\n  let showWallet = \"\"\n  if(typeof signer != \"undefined\" && address){\n    showWallet = (\n      <span>\n        <span style={{padding:3}}>\n          <Address minimized={true} value={address} />\n        </span>\n      </span>\n    )\n  }\n\n  return (\n    <Button shape=\"round\" size=\"large\" onClick={()=>{setShowMore(!showMore)}}>\n      <Badge status={status} /> {props.name} {showWallet} #{blockNumber} {showExtra}\n    </Button>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}